<!doctype html>
<html lang="en">
<head>
    <style>
        p {
          margin: 10px 0;
        }

        h3 {
          position: relative;
          margin: 0;
        }
        h2 {
          position: relative;
          padding-bottom: 10px;
          padding-top: 10px;
          margin: 0;
        }

        .button2 {
          position: absolute;
          right: 0;
        }
    </style>
</head>
 <body style="background-color: #e8eae7;">
  <meta charset="utf-8"> 
  <h1 id="hub">死亡之城</h1>
  <p>由ArithSeq基于死亡日记1.4.3修改。请勿用于商业用途。</p>
  <p style="color:red">死亡之城和官方版区别很大，玩家普遍反馈较难。如之前玩过官方版请仔细阅读修改内容。</p>
  <h2>
    <button onclick="scrollToSection('external')">外壳修改</button>
    <button onclick="scrollToSection('internal')">游戏修改</button>
    <button onclick="scrollToSection('appendix')">附录</button>
    <button onclick="scrollToSection('faq')">常见问题</button>
    <button onclick="scrollToSection('music')">音乐列表</button>
    <button onclick="scrollToSection('factsheet')">死亡日记简介</button>
    <button onclick="scrollToSection('contact')">联络和更新方式</button>
  </h2>
    <h2 id="external">外壳修改<button class="button2" onclick="scrollToSection('hub')">返回</button></h2>
    <p>
      1. 安装包重命名并替换图标，方便区分。<br>
      2. 支持多存档，和一些存档管理功能。<br>
      3. 移除所有谷歌Play需求和功能。<br>
      4. 内购天赋可以免费使用。<br>
      5. 勋章页可选作弊 (作弊下BUFF全加，UI显示全完成，可随时关闭恢复原进度，开启作弊不影响真实解锁)。<br>
      6. 谷歌成就可以离线获得并查看 (作弊天赋开启下无效)。<br>
      7. 设置界面可设置音乐和音效开关。<br>
      8. 设置界面可设置屏幕缩放开关 (适配长屏手机)。<br>
      9. 灵堂本地支持 (会显示之前的死亡记录)。<br>
      10. 取消英文和中文除外语言的支持，因为翻译质量堪忧。欢迎翻译并贡献！<br>
      11. 改良音乐播放逻辑，替换部分官方原声带并增加新音乐，曲名在文末。<br>
      12. 取消开场界面。<br>
      13. 圣诞节背景会在圣诞节左右显示。<br>
      14. 游戏内地图替换成城市背景。<br>
      15. 所有pvr.ccz资源包去除加密，方便修改。<br> 
      16. 移除无用的代码和功能。<br>
    </p>

    <h2 id="internal">游戏修改<button class="button2" onclick="scrollToSection('hub')">返回</button></h2>
    <p>
      1. 废除人物选择制度。你现在以第三方身份进入游戏，可以解锁所有NPC。<br>
      2. 家解锁角色限定家具 (机床，电炉电网，雷区),电网工事合一。<br>
      3. <button id="thirst_return" onclick="scrollToSection('thirst')">详见附录</button> 新增口渴值，病毒载量。<br>
      4. 解锁独占、隐藏的制造品，和饮酒。<br>
      5. 心情影响射击准度 (最高-48%)，心情小于5可能在丢东西/打仗/抄家后自杀。<br>
      6. 衣物如战斗受伤可能损坏，过度睡觉会损失心情值。<br>
      7. <button id="moonlight_return" onclick="scrollToSection('moonlight')">详见附录</button> 工事防御叠加，部分地点和防御不再无敌。<br>
      8. 新增天赋：幸存者 (损耗降低)，囤积者 (开局携带物资)，心灵手巧 (制造升级时间缩短)，行踪隐蔽 (遭遇僵尸和夜袭概率降低)，背包客 (背包负载+30)。<br>
      9. <button id="cmd_return" onclick="scrollToSection('cmd')">详见附录</button> 新增作弊天赋：内购破解 (商店无限内购，老式电台命令行)，全解锁 (全地点，全NPC，满好感，副本循环刷)。<br>
      10. 天赋可多选，效果会叠加。<br>
      11. 来源Miao版：如特别饥饿生命值会下降。<br>
      12. 发电厂最少4天不坏，晚9点到凌晨1点不会坏，部件成本降低。<br>
      13. <button id="steal_return" onclick="scrollToSection('steal')">详见附录</button> 来源娱版 (作者：true)：NPC偷窃功能。<br>
      14. <button id="bazaar_return" onclick="scrollToSection('bazaar')">详见附录</button> 创意来自娱版：幸存者市场副本。抽奖，旅舍，和买卖物资的地方。<br>
      15. 新NPC: W.怀特。喜欢枪支，售卖化学品。解锁副本：强盗老巢 (内有持枪强盗)，高中。<br>
      16. 若家里东西太多并长时间出门，家可能被偷。防御会降低被偷的概率。如果所有防御设施都有效，被偷概率为0。<br>
      17. 来源娱版：电台制造后的天气预报，16％概率天气错误，天气栏查看。<br>
      18. 来源娱版：可以在游戏开始时跳过教程。<br>
      19. 创意来自e版：081-12 (卧室) 通关后解锁“传送门“高难副本，打通可体验结局。<br>
      20. 喝咖啡6小时内睡觉质量不好，喝酒12小时内枪准度降低 (小时*2%)。<br>
      21. 仓库和装备界面会暂停时间，使用物品会耗时10分钟。转移4重量物品（心灵手巧天赋：5重量）会耗费一分钟。装备武器会耗费一分钟。<br>
      22. 广告副本更改为垃圾场，每天花费时间得免费奖励。<br>
      23. 老式电台每36小时发送消息会增加NPC出现概率 [20% -> 40%]，电台消息使用游戏内时间，且会保存。<br>
      24. 可在生命值状态栏中使用BUFF类物品。<br>
      25. 可在地图界面预览NPC和市场交易清单。<br>
      26. 新增物品：乳酪。风味炖菜的反向-加很多心情，少量饱食度。指定副本掉落，市场售卖。<br>
      27. 物品重量，配方小规模修改，适当增长部分副本。<br>
      28. 仓库界面会暂停游戏。<br>
      29. 状态栏电力指示。<br>
      30. 需要在新的装备栏里装备手电或探测器才能获得增益。<br>
      31. <button id="dog_return" onclick="scrollToSection('dog')">详见附录</button> 狗舍需要建设，狗在博物馆。玩家可以将狗带出参与战斗和物资搜寻。<br>
      32. 子弹和咖啡豆有重量 (0.02，最小重量为1)。<br>
      33. 傍晚NPC会来购买你的东西。如果友好程度高，价格会更好。<br>
      34. <button id="gas_return" onclick="scrollToSection('gas')">详见附录</button> 汽油机制 (加油站油泵，油泵部件，新加速系统，火焰喷射器)。<br>
      35. 顶端栏增加天赋按钮，方便查看已选天赋。如数字为灰色意味着至少一个作弊天赋被开启。<br>
      36. <button id="bullet_return" onclick="scrollToSection('bullet')">详见附录</button> 新增标准子弹。<br>
      37. 新增保险箱家具：建造后可放物品，避免偷窃和僵尸破坏。<br>
      38. 武器早期不容易坏，如果坏会返回一些部件。<br>
      39. <button id="expire_return" onclick="scrollToSection('expire')">详见附录</button> 食物可能过期,变成肥料。<br>
      40. 野兔陷阱可用土豆加速 (12小时)。<br>
      41. 野怪难度和出现概率随天数增加。<br>
      42. 可能遇到强盗，索求一些物品或者钱。你可以战斗，妥协，或逃跑。<br>
      43. 酒瘾：喝酒可能增加日后喝酒需要的数量。每个季节酒瘾会减1。<br>
      44. 陌生人高好感度新增副本：水族馆，不能使用枪支和爆炸类装备。<br>
      45. 平衡社交达人天赋：现在被抢和被偷的概率会增加。<br>
      46. 零下温度感染将会加速。冬天气温微调 - 大雪晚上电炉加火炉仍会轻微感染。<br>
      47. 尝试修复官方BUG (重量为负，教程工作台，非中文电器无法进入，诈尸，物品存放处移动大量子弹咖啡豆无响应，NPC交易价值浮点数误差，制作按钮可同时点击，NPC隐形枪支，遭遇僵尸可大退避免，教程UI问题)。<br>
    </p>

    <h2 id="appendix">附录<button class="button2" onclick="scrollToSection('hub')">返回</button></h2>
    <h3 id="moonlight">夜袭<button class="button2" onclick="scrollToSection('moonlight_return')">返回</button></h3>
    <p>最大难度：131+天，[65, 75]，概率50%。公式：[工事(30) + 狗(10) + 电网(40)] + 炸药(最后一道防线，40)。副本防御适度提高，但没有副本免疫夜袭。</p>
    <h3 id="cmd">电台命令行<button class="button2" onclick="scrollToSection('cmd_return')">返回</button></h3>
    <dl>
    <p>需选择IAP破解才可使用：</p>
      <dt>heal - 治疗全八项和狗</dt>
      <dt>kill - 杀死玩家</dt>
      <dt>fix - 修复发电机和油泵 (如可修复)</dt>
      <dt>obtain 木质材料 100 - 获得100木质材料</dt>
      <dt>obtain everything 100 - 获得100个所有物品</dt>
    <p>随时都可使用：</p>
      <dt>backup - 成就和奖章备份字符将被放至输入框，可以复制。</dt>
      <dt>restore {JSON} - 将备份来的字符串覆盖到存档。</dt>
    </dl>
    <h3 id="steal">NPC偷窃<button class="button2" onclick="scrollToSection('steal_return')">返回</button></h3>
    <p>可在NPC家偷东西。摘抄true的指南：偷窃成功时该NPC增加1警惕度，失败增加2警惕度，同时减少2点好感值（社交达人-1，作弊全解锁-0）。每天更新贼运，会影响成功率。若当日未对该NPC偷窃，其警惕度-1。</p>
    <h3 id="bazaar">幸存者市场<button class="button2" onclick="scrollToSection('bazaar_return')">返回</button></h3>
    <p>你可以在这里售卖背包中的物品，获得钱币 (最多持有99999)，并购买物资。物资每天刷新，可在地图界面预览。如有优惠，地图界面 - 地点弹窗 - 物品列表弹窗会显示 “sale“ 图标。市场里有抽奖 (试试手气！) 和旅舍 (有偿休息和放松) 。</p>
    <h3 id="thirst">口渴值<button class="button2" onclick="scrollToSection('thirst_return')">返回</button></h3>
    <p>主角会自动从仓库或背包喝水。每6小时喝1份 (夏天4小时)，并获得对应时间口渴免疫。如果免疫过期，每小时扣3口渴值。口渴值低于25，每小时扣20生命。如果获得水并口渴值未满会自动喝水。回家如果口渴值未满会自动喝水。超出最大值的水会被转化成免疫时间。</p>
    <h3>病毒载量</h3>
    <p>每次与难度为2以上的僵尸作战受伤有概率获得1病毒。如果病毒超过最大值主角将立刻死亡。病毒不会下降，不过主角可以将其他属性转换成病毒载量。除了生命以外的属性可以用5属性兑换15病毒载量，生命为10兑换15病毒载量。穿衣服可降低获得病毒概率。新增实验性解药，可为病毒载量提供72小时免疫，可在金医生获得。濒死使用急救包可减半病毒载量。</p>
    <h3 id="gas">汽油机制<button class="button2" onclick="scrollToSection('gas_return')">返回</button></h3>
    <p>仅在有摩托车的情况下生效。玩家可在加油站用油泵组件修复汽油泵。修复后每小时汽油+1。汽油最大值99，不可售卖。骑摩托会使用汽油，大幅增加速度。战隼被移除，引擎和加成用在摩托车上。 靴子会在行走固定距离后损坏。如果玩家有靴子，靴子会自动提供少量速度加成。如果玩家有摩托车会自动提供背包大小加成。如果玩家有汽油并想花费汽油 (可在移动界面-摩托车状态按钮禁用加速)，会提供速度加成。新增武器：火焰喷射器，消耗汽油，对全场僵尸造成伤害。若4只或以上僵尸在场上，每只僵尸获得25伤害。若2只或以上僵尸在场上，每只获得50伤害。若场上只有1只僵尸，获得100伤害。你可能在路边发现遗弃的汽车。如有装备虹吸工具 (工具台制造)，可获得汽油。</p>
    <h3 id="bullet">标准子弹<button class="button2" onclick="scrollToSection('bullet_return')">返回</button></h3>
    <p>副本及僵尸遭遇大概率只会获得标准子弹。标准子弹很难损伤枪支，准度也更高。不可制作，价值高。如背包有标准子弹并选择了标准子弹优先，会使用标准子弹。如果任意一种子弹打没，会自动切换子弹类型。</p>
    <h3 id="expire">食物过期<button class="button2" onclick="scrollToSection('expire_return')">返回</button></h3>
    <p>食物可能在凌晨1点过期，过期概率因食物而异。过期食物会被转化成肥料，加速作物生长 (3小时)，可以售卖。通电的冰箱可以避免家里的食物过期。保险箱和背包里的食物不会过期。</p>
    <h3 id="dog">带狗外出<button class="button2" onclick="scrollToSection('dog_return')">返回</button></h3>
    <p>狗有三项属性：饥饿，外伤，和心情。饥饿值会在48小时内殆尽。喂肉可获得12小时饥饿时间。每天和狗互动来增加双方的心情值。使用狗骨头来立即填满狗的心情值。狗可能在战斗中受伤，用绷带来治疗。如果任一属性为0，狗不会参与战斗或家的防御。狗不会死。</p>
    <p>你可以在狗舍界面将狗带出门。如果和狗在外过夜，狗无法保护家。战斗中，狗可以攻击或吸引僵尸的注意，更能帮你搜寻到更多的资源。如果将狗带出，顶栏会出现狗的标志，可点击管理狗的状态。如果图标变灰，意味着狗因为属性过低无法参与加成。如果狗舍家具图标变灰，狗将因为属性过低无法为家防御。你可以给狗起名。</p>

    <h2 id="faq">常见问题<button class="button2" onclick="scrollToSection('hub')">返回</button></h2>
    <b>问：我很不喜欢病毒载量的设计！你能不能搞个没有这个功能的版本？</b>
    <p>答：不能。病毒载量经过精心平衡。正常游玩，合理牺牲属性，完全不影响通关。如果想玩变态版可以开作弊，命令行治疗玩家。</p>
    <b>问：这个版本更新了什么？</b>
    <p>答：一直以来我个人项目的一大弊端就是缺乏文档编写，所以很抱歉，我也不知道老版本更新了什么。此文档正确描述了当前所有的修改内容（大概可能吧）。</p>
    <b>问：为什么删除了角色选择机制和战隼？</b>
    <p>答：官方的角色设定很大程度上是为了赚钱。每个内购角色都有致命缺点，和独占内容。与其继续维持这个欠火候的系统，不如利用这些内容来支持同一个用户体验。战隼估计是未来的内购物品，在汽油机制的制作过程中因为和摩托车冲突和不符合世界观被删除了。</p>
    <b>问：IOS，PC能玩死亡之城吗？</b>
    <p>答：不幸的是，官方在这两个平台从未发布过未经SpiderMonkey编译的版本。因此我无法获得平台独有的代码，无法兼容死亡之城。可以通过安卓模拟器，比如BlueStacks，或者购置安卓设备游玩。</p>    
    <b>问：这个游戏好难/物资好难获得呀！能搞的简单一些吗？</b>
    <p>答：每次更新都会因为新加入的功能重新平衡其他部分。因为循序渐进的更新和平衡，我相信死亡之城的平衡是恰当的。游戏的设定是僵尸末日，资源稀缺和艰难的生存是必要的。如果你觉得某些设定不是非常平衡，欢迎告诉我。不过十有八九我会反驳你的论点。</p>
    <b>问：你能不能加一些物品，加一些副本？</b>
    <p>答：除非有新的功能或者特性，不会再添加新的物品和副本 - 添加这类内容很费时间（修图，翻译，平衡等等）。我相信质大于量。如果没有精力好好设计一个功能，就不设计。</p>
    <b>问：你能不能加一些剧情？</b>
    <p>答：个人有5+年游戏设计的经验，认为生存游戏传统剧情不可行。剧情只会分化玩家，让生存玩家没法专心生存，剧情玩家被生存难度阻碍。Lore可以有，除非有经费来搞多枝干剧情，再多有害无益。</p>
    <b>问：怎么下载新版本？好多链接都不好使！</b>
    <p>答：很多网站被中国屏蔽。如果你想睁开眼睛看世界，请百度Geph，FreeBrowser，V2Ray，VPS机场。如果你不在乎最新的更新，可以时常看看贴吧的主题帖，我会不定期更新。</p>
    <b>问：我会写代码/做美工/搞内测，有什么我能帮到的？</b>
    <p>答：太多太多东西了。从新功能，到类似081的副本特殊地图，到单元测试 (unit testing)。如果你像我一样愿意为这个游戏发电，请联系我。</p>
    <b>问：我想做自己的魔改版，该从哪开始？</b>
    <p>答：APK就是ZIP，进去看看，游戏的代码都在js里，可以直接修改。素材可以直接加png，或者用TexturePacker压plist。推荐VSCode的Diff Folder插件，借鉴其他改版的代码区别。最后别忘了用apktool/MT管理器给应用签名。</p>
    <b>问：你能不能按我的需求改这个游戏，或者帮我破解另一个游戏？</b>
    <p>答：不能。这类操作耗时费力，一般会收费，然而我不想用这个项目赚钱。其他游戏有可能，看心情。</p>
    <b>问：我有建议，意见，或别有请求，可以联系你吗？</b>
    <p>答：当然可以。如果你的问题没有被回答，欢迎通过主页面-大拇指按钮的任何途径联系我。</p>

    <h2 id="music">音乐列表<button class="button2" onclick="scrollToSection('hub')">返回</button></h2>
    <p>
      Destroyer - Sergey Cheremisinov<br>
      Secrets and Lies - David Celeste<br>
      The Reunion - Trevor Kowalski<br>
      There Must Be - So Vea<br>
      The Slow Shift - Gavin Luke<br>
      In the Waiting - Johannes Bornlof<br>
      Planting the Seeds - David Celeste<br>
      Nordkap - Martin Landh<br>
      Into the Forest I Go - David Celeste<br>
      Incandescence - Silver Maple<br>
      Sleepwalker I - Sergey Cheremisinov<br>
      Tensor Bandage - Blue Wizard Studio<br>
      Deep Corridor - Brambles<br>
      Search and Flight - Sergey Cheremisinov<br>
      恐惧边缘 - 罗杨<br>
      死亡触手 - 罗杨<br>
      废土 - 罗杨<br>
      来一杯咖啡 - 罗杨<br>
      最后的避难所 - 罗杨<br>
      孤岛 - 罗杨<br>
      穷途 - 罗杨<br>
      末路 - 罗杨<br>
    </p>

    <h2 id="factsheet">死亡日记简介<button class="button2" onclick="scrollToSection('hub')">返回</button></h2>
    <p>死亡日记，原名浆果小镇，由成都点犀网络科技有限公司开发，北京乐动卓越科技有限公司代理。游戏于2015年9月23日发行于iOS平台，于2015年9月25日开始安卓版内测，谷歌Play版本于2015年11月23日上线，最后一次更新（1.4.3）于2018年6月27日。游戏于2019年6月末停服。</p><p>
        鉴于游戏的弱联网性质，除了排行榜，应用内购买，和游戏内电台外的功能均可离线享用。</p>
    <p>死亡日记使用了Cocos2d-JS引擎，安装包没有加固，源码也没有经过编译和混淆，修改难度极低。虽然原版图像素材经过加密，密钥 (B29B3886-543224E4-71BDF6E3-9275C626) 和编辑工具 (TexturePacker) 获取后操作相对简单 (此版本已去除加密)。游戏存档在root目录下使用了加密sqlite3数据库存储，密钥为 (1a2b3c4d5fberrytown)。</p>
        
    <h2 id="contact">联络和更新方式<button class="button2" onclick="scrollToSection('hub')">返回</button></h2>
    <p>主页面-大拇指按钮的任何途径。</p>

<script>
    function scrollToSection(sectionId) {
        var section = document.getElementById(sectionId);
        if (section) {
            section.scrollIntoView({ behavior: 'instant' });
        }
    }
</script>

</body>
</html>
